<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>বাউফল টুডে | সত্যের সন্ধানে</title>
    
    <!-- ফন্ট এবং আইকন -->
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* বেসিক রিসেট ও ভেরিয়েবল */
        :root {
            --primary-color: #000000;
            --accent-color: #D91C22; /* নিউজ পোর্টাল লাল */
            --bg-color: #ffffff;
            --text-gray: #444444;
            --light-gray: #f2f2f2;
            --border-color: #e0e0e0;
            --container-width: 1200px;
            --font-main: 'Hind Siliguri', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
        
        body {
            font-family: var(--font-main);
            background: #fff;
            color: var(--primary-color);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        a { text-decoration: none; color: inherit; transition: 0.2s; }
        a:hover { color: var(--accent-color); }
        ul { list-style: none; }
        img { width: 100%; height: auto; display: block; }
        
        .container {
            max-width: var(--container-width);
            margin: 0 auto;
            padding: 0 15px;
        }

        /* ১. টপ বার (তারিখ ও সোশ্যাল) */
        .top-bar {
            background: #fcfcfc;
            border-bottom: 1px solid var(--border-color);
            padding: 8px 0;
            font-size: 14px;
            color: #666;
        }
        .top-flex { display: flex; justify-content: space-between; align-items: center; }
        .social-icons a { margin-left: 10px; color: #666; }
        .social-icons a:hover { color: var(--accent-color); }

        /* ২. লোগো ও হেডার */
        .main-header {
            padding: 20px 0;
            background: #fff;
            border-bottom: 1px solid var(--border-color);
        }
        .header-wrapper { display: flex; align-items: center; justify-content: space-between; }
        
        .logo h1 {
            font-size: 42px;
            font-weight: 700;
            line-height: 1;
            color: #000;
        }
        .logo span { color: var(--accent-color); }
        
        /* ৩. নেভিগেশন (ডেস্কটপ) */
        .navbar {
            background: #fff;
            border-bottom: 3px solid var(--border-color); /* একটু মোটা বর্ডার */
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 6px -6px rgba(0,0,0,0.1);
        }
        .nav-menu { display: flex; justify-content: flex-start; gap: 30px; }
        .nav-menu li a {
            display: block;
            padding: 12px 0;
            font-size: 17px;
            font-weight: 600;
            color: #222;
            position: relative;
        }
        .nav-menu li a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: var(--accent-color);
            transition: 0.3s;
        }
        .nav-menu li a:hover::after { width: 100%; }

        /* মোবাইল মেনু ট্রিগার */
        .mobile-toggle { display: none; font-size: 24px; cursor: pointer; color: #333; }

        /* ৪. ব্রেকিং নিউজ / টিকার */
        .ticker-wrap {
            display: flex;
            align-items: center;
            background: #f9f9f9;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 25px;
        }
        .ticker-title {
            background: var(--accent-color);
            color: #fff;
            padding: 8px 15px;
            font-size: 14px;
            font-weight: 600;
            white-space: nowrap;
        }
        .ticker-content { padding: 8px; flex: 1; font-size: 15px; overflow: hidden; }

        /* ৫. হিরো সেকশন (লিড নিউজ + সাইড লিস্ট) */
        .hero-grid {
            display: grid;
            grid-template-columns: 2fr 1fr; /* ২ ভাগ ১ ভাগ */
            gap: 25px;
            margin-bottom: 40px;
        }

        /* লিড নিউজ স্টাইল */
        .lead-news-card { position: relative; }
        .lead-image {
            width: 100%;
            aspect-ratio: 16/9;
            object-fit: cover;
            border-radius: 4px;
            margin-bottom: 12px;
            background: #ddd; /* লোডিং কালার */
        }
        .lead-title {
            font-size: 32px;
            font-weight: 700;
            line-height: 1.3;
            margin-bottom: 8px;
        }
        .lead-title:hover { color: var(--accent-color); }
        .lead-excerpt { font-size: 16px; color: #555; line-height: 1.6; }
        .time-stamp { font-size: 13px; color: #888; margin-top: 5px; display: block; }

        /* সাইডবার নিউজ লিস্ট */
        .side-news-list { display: flex; flex-direction: column; gap: 0; }
        .mini-news-item {
            display: flex;
            gap: 15px;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }
        .mini-news-item:first-child { padding-top: 0; }
        .mini-news-item:last-child { border-bottom: none; }
        
        .mini-thumb {
            width: 90px;
            height: 60px;
            object-fit: cover;
            border-radius: 3px;
            background: #eee;
        }
        .mini-title {
            font-size: 16px;
            font-weight: 600;
            line-height: 1.4;
        }

        /* ৬. ক্যাটাগরি সেকশন */
        .section-wrapper { margin-bottom: 40px; }
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #000;
            margin-bottom: 20px;
            padding-bottom: 5px;
        }
        .cat-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--accent-color);
            position: relative;
        }
        .cat-title span { color: #000; }
        .view-all { font-size: 14px; font-weight: 600; color: #666; }

        .news-grid-4 {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }
        .card-standard .card-img {
            aspect-ratio: 16/10;
            object-fit: cover;
            border-radius: 4px;
            margin-bottom: 10px;
            background: #f0f0f0;
            transition: transform 0.3s;
        }
        .card-standard:hover .card-img { transform: scale(1.02); }
        .card-standard h3 { font-size: 18px; font-weight: 600; line-height: 1.4; }

        /* ৭. ফুটার */
        footer {
            background: #111;
            color: #ccc;
            padding: 50px 0 20px;
            margin-top: 50px;
        }
        .footer-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 40px;
            padding-bottom: 40px;
            border-bottom: 1px solid #333;
        }
        .footer-logo { font-size: 28px; color: #fff; font-weight: 700; margin-bottom: 15px; display: inline-block; }
        .footer-links li { margin-bottom: 10px; }
        .footer-links a:hover { color: #fff; text-decoration: underline; }
        .copyright { text-align: center; padding-top: 20px; font-size: 14px; color: #777; }

        /* মোবাইল সাইডবার (Off-canvas Menu) */
        .mobile-menu-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 1001;
            opacity: 0; visibility: hidden; transition: 0.3s;
        }
        .mobile-sidebar {
            position: fixed; top: 0; left: -280px; width: 280px; height: 100%;
            background: #fff; z-index: 1002; transition: 0.3s;
            padding: 20px; overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }
        .mobile-menu-active .mobile-menu-overlay { opacity: 1; visibility: visible; }
        .mobile-menu-active .mobile-sidebar { left: 0; }
        
        .m-nav-list li { border-bottom: 1px solid #eee; }
        .m-nav-list li a { display: block; padding: 12px 0; font-size: 16px; font-weight: 500; }
        .close-menu { font-size: 24px; float: right; cursor: pointer; margin-bottom: 20px; }

        /* রেসপনসিভ ডিজাইন */
        @media (max-width: 992px) {
            .navbar .nav-menu { display: none; } /* ডেস্কটপ মেনু হাইড */
            .mobile-toggle { display: block; }
            .hero-grid { grid-template-columns: 1fr; }
            .news-grid-4 { grid-template-columns: repeat(2, 1fr); }
            .footer-grid { grid-template-columns: 1fr; gap: 30px; }
            .logo h1 { font-size: 32px; }
            .lead-title { font-size: 24px; }
        }

        @media (max-width: 480px) {
            .news-grid-4 { grid-template-columns: 1fr; }
            .top-bar { display: none; } /* মোবাইলে টপ বার দরকার নেই */
        }
    </style>
</head>
<body>

    <!-- মোবাইল মেনু স্ট্রাকচার -->
    <div class="mobile-menu-overlay" onclick="toggleMenu()"></div>
    <div class="mobile-sidebar">
        <i class="fas fa-times close-menu" onclick="toggleMenu()"></i>
        <div class="logo" style="margin-bottom: 20px;">
            <h2>বাউফল <span>টুডে</span></h2>
        </div>
        <ul class="m-nav-list">
            <li><a href="index.html">প্রচ্ছদ</a></li>
            <li><a href="category.html?c=জাতীয়">জাতীয়</a></li>
            <li><a href="category.html?c=রাজনীতি">রাজনীতি</a></li>
            <li><a href="category.html?c=বাউফল">বাউফল বার্তা</a></li> <!-- এখানে বাউফল লিঙ্ক -->
            <li><a href="category.html?c=খেলাধুলা">খেলাধুলা</a></li>
            <li><a href="category.html?c=বিনোদন">বিনোদন</a></li>
        </ul>
    </div>
    <!-- মোবাইল মেনু শেষ -->

    <div class="top-bar">
        <div class="container top-flex">
            <div id="current-date">লোড হচ্ছে...</div>
            <div class="social-icons">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
    </div>

    <header class="main-header">
        <div class="container header-wrapper">
            <div class="logo">
                <a href="index.html"><h1>বাউফল <span>টুডে</span></h1></a>
            </div>
            <!-- ডেস্কটপ মেনু -->
            <div class="mobile-toggle" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <nav class="navbar">
        <div class="container">
            <ul class="nav-menu">
                <li><a href="index.html">প্রচ্ছদ</a></li>
                <li><a href="category.html?c=জাতীয়">জাতীয়</a></li>
                <li><a href="category.html?c=রাজনীতি">রাজনীতি</a></li>
                <!-- ডাটাবেজে বাউফল আছে, কিন্তু আমরা দেখাবো বাউফল বার্তা -->
                <li><a href="category.html?c=বাউফল">বাউফল বার্তা</a></li>
                <li><a href="category.html?c=খেলাধুলা">খেলাধুলা</a></li>
                <li><a href="category.html?c=বিনোদন">বিনোদন</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <!-- টিকার -->
        <div class="ticker-wrap">
            <div class="ticker-title">শিরোনাম</div>
            <div class="ticker-content" id="ticker-box">
                <marquee>বাউফল টুডে - সর্বদা সত্যের সন্ধানে...</marquee>
            </div>
        </div>

        <!-- হিরো সেকশন -->
        <div class="hero-grid">
            <!-- মেইন লিড -->
            <div id="lead-news-container">
                <!-- স্কেলিটন লোডার (ডাটা আসার আগে দেখাবে) -->
                <div style="background:#f0f0f0; height:300px; width:100%; border-radius:4px;"></div>
            </div>

            <!-- সাইডবার (সর্বশেষ) -->
            <div>
                <h3 style="border-bottom: 2px solid var(--accent-color); padding-bottom: 5px; margin-bottom: 15px; font-size: 18px;">সদ্য প্রাপ্ত</h3>
                <div class="side-news-list" id="latest-news-list">
                    <!-- জাভাস্ক্রিপ্ট দিয়ে লোড হবে -->
                </div>
            </div>
        </div>

        <!-- ক্যাটাগরি: বাউফল বার্তা (ডাটাবেজ নাম: বাউফল) -->
        <div class="section-wrapper">
            <div class="section-header">
                <h2 class="cat-title"><span>বাউফল</span> বার্তা</h2>
                <a href="category.html?c=বাউফল" class="view-all">আরও দেখুন <i class="fas fa-arrow-right"></i></a>
            </div>
            <div class="news-grid-4" id="bauphal-news-grid"></div>
        </div>

        <!-- ক্যাটাগরি: রাজনীতি -->
        <div class="section-wrapper">
            <div class="section-header">
                <h2 class="cat-title">রাজনীতি</h2>
                <a href="category.html?c=রাজনীতি" class="view-all">আরও দেখুন <i class="fas fa-arrow-right"></i></a>
            </div>
            <div class="news-grid-4" id="politics-news-grid"></div>
        </div>

        <!-- ক্যাটাগরি: খেলাধুলা -->
        <div class="section-wrapper">
            <div class="section-header">
                <h2 class="cat-title">খেলাধুলা</h2>
                <a href="category.html?c=খেলাধুলা" class="view-all">আরও দেখুন <i class="fas fa-arrow-right"></i></a>
            </div>
            <div class="news-grid-4" id="sports-news-grid"></div>
        </div>

    </div>

    <footer>
        <div class="container">
            <div class="footer-grid">
                <div>
                    <div class="footer-logo">বাউফল টুডে</div>
                    <p style="color:#aaa; font-size:14px; line-height:1.6;">নির্ভীক সাংবাদিকতা ও বস্তুনিষ্ঠ সংবাদের প্রতিশ্রুতি নিয়ে আমরা আছি আপনার পাশে। বাউফলের প্রতিটি মুহূর্তের খবর সবার আগে।</p>
                </div>
                <div>
                    <h3 style="color:#fff; margin-bottom:20px; font-size:18px;">জনপ্রিয় বিভাগ</h3>
                    <ul class="footer-links">
                        <li><a href="category.html?c=জাতীয়">জাতীয় সংবাদ</a></li>
                        <li><a href="category.html?c=বাউফল">বাউফল বার্তা</a></li>
                        <li><a href="category.html?c=রাজনীতি">রাজনীতি</a></li>
                    </ul>
                </div>
                <div>
                    <h3 style="color:#fff; margin-bottom:20px; font-size:18px;">যোগাযোগ</h3>
                    <p style="color:#aaa; margin-bottom:10px;">মোবাইল: +৮৮০ ১৭১১-০০০০০০</p>
                    <p style="color:#aaa;">ইমেইল: info@bauphaltoday.com</p>
                    <p style="color:#aaa;">বাউফল, পটুয়াখালী, বরিশাল</p>
                </div>
            </div>
            <div class="copyright">
                &copy; ২০২৬ বাউফল টুডে | সর্বস্বত্ব সংরক্ষিত
            </div>
        </div>
    </footer>

    <!-- Firebase Scripts -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, query, orderBy, limit, getDocs, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // আপনার কনফিগারেশন
        const firebaseConfig = {
            apiKey: "AIzaSyD_HBGuQSh_GzqrHqHbgdaoBikLZsK3Qqs",
            authDomain: "new-all-f99f7.firebaseapp.com",
            databaseURL: "https://new-all-f99f7-default-rtdb.firebaseio.com",
            projectId: "new-all-f99f7",
            storageBucket: "new-all-f99f7.firebasestorage.app",
            messagingSenderId: "1069748173900",
            appId: "1:1069748173900:web:158d6336c0f4628133c8e9"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const defaultImage = "https://via.placeholder.com/800x450?text=Bauphal+Today";

        // ১. বাংলা তারিখ
        const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('current-date').innerText = new Date().toLocaleDateString('bn-BD', dateOptions);

        // ২. টিকার লোড
        onSnapshot(doc(db, "settings", "ticker"), (docSnap) => {
            if (docSnap.exists()) {
                document.getElementById('ticker-box').innerHTML = `<marquee>${docSnap.data().text}</marquee>`;
            }
        });

        // ৩. মেইন কন্টেন্ট লোড (Smart Fetching)
        async function loadNews() {
            try {
                // সব ক্যাটাগরি একসাথে হ্যান্ডেল করার জন্য আমরা লেটেস্ট ৫০টা নিউজ আনবো, তারপর ফিল্টার করবো
                // এটি ছোট প্রজেক্টের জন্য সবচেয়ে ভালো পদ্ধতি (Barishal/Database Read কমাবে)
                const q = query(collection(db, "news"), orderBy("timestamp", "desc"), limit(50));
                const snap = await getDocs(q);
                
                let allNews = [];
                snap.forEach(d => allNews.push({ id: d.id, ...d.data() }));

                if(allNews.length === 0) return;

                // --- লিড নিউজ (সবচেয়ে লেটেস্ট ১টি) ---
                const lead = allNews[0];
                document.getElementById('lead-news-container').innerHTML = `
                    <div class="lead-news-card">
                        <a href="details.html?id=${lead.id}">
                            <img src="${lead.imageUrl || defaultImage}" class="lead-image" alt="${lead.title}">
                            <h2 class="lead-title">${lead.title}</h2>
                            <p class="lead-excerpt">${lead.details ? lead.details.substring(0, 100) + '...' : ''}</p>
                            <span class="time-stamp"><i class="far fa-clock"></i> ${new Date(lead.timestamp?.toDate()).toLocaleDateString('bn-BD')}</span>
                        </a>
                    </div>
                `;

                // --- সাইডবার লিস্ট (পরের ৫টি) ---
                let sideHtml = '';
                allNews.slice(1, 6).forEach(n => {
                    sideHtml += `
                        <div class="mini-news-item">
                            <a href="details.html?id=${n.id}" style="display:flex; gap:15px; width:100%;">
                                <img src="${n.imageUrl || defaultImage}" class="mini-thumb">
                                <h3 class="mini-title">${n.title}</h3>
                            </a>
                        </div>`;
                });
                document.getElementById('latest-news-list').innerHTML = sideHtml;

                // --- ক্যাটাগরি রেন্ডার ফাংশন ---
                // লক্ষ্য করুন: এখানে আমরা 'catDatabaseName' দিয়ে খুঁজবো (যেমন: বাউফল)
                function renderCategoryGrid(categoryDbName, elementId) {
                    const filtered = allNews.filter(n => n.category == categoryDbName).slice(0, 4);
                    let html = '';
                    if(filtered.length === 0) html = '<p style="grid-column: 1/-1; color:#888;">এই বিভাগে কোনো খবর নেই</p>';
                    
                    filtered.forEach(n => {
                        html += `
                            <div class="card-standard">
                                <a href="details.html?id=${n.id}">
                                    <img src="${n.imageUrl || defaultImage}" class="card-img">
                                    <h3>${n.title}</h3>
                                </a>
                            </div>`;
                    });
                    document.getElementById(elementId).innerHTML = html;
                }

                // ডাটাবেজের নাম অনুযায়ী কল করছি
                renderCategoryGrid("বাউফল", "bauphal-news-grid"); // ডাটাবেজে 'বাউফল' আছে
                renderCategoryGrid("রাজনীতি", "politics-news-grid");
                renderCategoryGrid("খেলাধুলা", "sports-news-grid");

            } catch (error) {
                console.error("Error loading news:", error);
                document.getElementById('lead-news-container').innerHTML = "খবর লোড করতে সমস্যা হচ্ছে। ইন্টারনেট সংযোগ পরীক্ষা করুন।";
            }
        }

        loadNews();

        // মোবাইল মেনু কন্ট্রোল (Global Scope এ দেওয়া হলো যাতে HTML onclick কাজ করে)
        window.toggleMenu = function() {
            document.body.classList.toggle('mobile-menu-active');
        }
    </script>
</body>
</html>